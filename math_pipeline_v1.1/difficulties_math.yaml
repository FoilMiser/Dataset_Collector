# difficulties_math.yaml
# v0.1 — Math domain/category → difficulty routing (1–10)
#
# Goal
#   Provide a single, editable taxonomy that lets the pipeline route screened math
#   data into domain/category/difficulty folders.
#
# Recommended folder layout
#   <destination_root>/pools/<pool>/dXX/<domain>/<category>/<target_id>/...
#
# WSL note
#   Windows: E:/AI-Research/datasets/Natural/math
#   WSL:     /mnt/e/AI-Research/datasets/Natural/math

schema_version: "0.1"
updated_utc: "2025-12-20"

globals:
  destination_root_windows: "E:/AI-Research/datasets/Natural/math"
  destination_root_wsl: "/mnt/e/AI-Research/datasets/Natural/math"
  folder_layout: "pools/{pool}/d{level:02d}/{domain}/{category}/{target_id}"
  create_level_folders: true
  sanitize_path_segments: true
  default_level: 5
  default_domain: "misc"
  default_category: "misc"

levels:
  1:
    label: "Foundational arithmetic"
    description: "Counting, place value, single-step operations, basic measurement."
  2:
    label: "Core arithmetic"
    description: "Multi-digit operations, fractions/decimals basics, negative numbers intro."
  3:
    label: "Pre-algebra basics"
    description: "Ratios/percents, exponents, simple equations, basic word problems."
  4:
    label: "Algebra I / geometry fundamentals"
    description: "Linear algebraic manipulation, coordinate geometry, congruence/similarity."
  5:
    label: "Algebra II / precalculus fundamentals"
    description: "Functions, polynomials, trig basics, logarithms, analytic geometry."
  6:
    label: "Precalculus → early undergrad"
    description: "Limits intro, single-variable calculus I/II basics, linear algebra basics."
  7:
    label: "Undergrad core"
    description: "Multivariable calculus, ODEs, discrete math core, probability/statistics core."
  8:
    label: "Upper undergrad"
    description: "Real/complex analysis intro, abstract algebra intro, advanced combinatorics."
  9:
    label: "Graduate / research-level"
    description: "Measure theory, algebraic topology, algebraic geometry, advanced topics."
  10:
    label: "Advanced research"
    description: "Category theory-heavy, specialized monographs, cutting-edge research text."

domains:
  arithmetic:
    name: "Arithmetic & number sense"
    categories:
      integers_basic: {level: 1, notes: "Add/sub/mul/div; place value; rounding."}
      fractions_decimals: {level: 2, notes: "Fraction equivalence, operations, decimal-fraction conversion."}
      ratios_percents: {level: 3, notes: "Ratios, rates, percents, unit conversions."}
      word_problems_elementary: {level: 3, notes: "Multi-step arithmetic word problems."}
      contest_elementary: {level: 4, notes: "Elementary/early middle-school contest style."}

  algebra:
    name: "Algebra"
    categories:
      prealgebra: {level: 3, notes: "Exponents, factoring basics, simple equations."}
      linear_equations: {level: 4, notes: "Linear equations/inequalities, slope/intercepts."}
      systems: {level: 4, notes: "Linear systems, elimination/substitution."}
      quadratics_polynomials: {level: 5, notes: "Quadratics, polynomials, factoring, roots."}
      functions_graphs: {level: 5, notes: "Function notation, transformations, composition."}
      rational_radical: {level: 5, notes: "Rational expressions, radicals, rationalizing."}
      logarithms_exponentials: {level: 5, notes: "Log/exponential rules, growth/decay models."}
      algebra_contest: {level: 6, notes: "AMC/AIME-style algebra manipulation."}
      abstract_algebra_intro: {level: 8, notes: "Groups/rings/fields basics; proofs."}
      commutative_algebra: {level: 9, notes: "Ideals, Noetherian rings, varieties (bridge to AG)."}
      representation_theory: {level: 10, notes: "Advanced reps, Lie theory connections."}

  geometry:
    name: "Geometry"
    categories:
      euclidean_basic: {level: 4, notes: "Triangles, circles basics, area/volume."}
      similarity_trig_geometry: {level: 5, notes: "Similarity, right-triangle trig, circle theorems."}
      coordinate_geometry: {level: 5, notes: "Distance, conics intro, vectors basics."}
      olympiad_geometry: {level: 7, notes: "Proof-heavy geometry; inversion, barycentric tricks."}
      differential_geometry_intro: {level: 9, notes: "Manifolds/curvature basics."}

  trigonometry:
    name: "Trigonometry"
    categories:
      trig_basics: {level: 5, notes: "Unit circle, identities, graphs."}
      trig_equations: {level: 6, notes: "Trig equations, transformations, inverse trig."}
      trig_contest: {level: 7, notes: "Contest identity manipulation / clever substitutions."}

  calculus:
    name: "Calculus"
    categories:
      calc_single_variable_1: {level: 6, notes: "Limits, derivatives, intro applications."}
      calc_single_variable_2: {level: 6, notes: "Integrals, FTC, series intro."}
      calc_series: {level: 7, notes: "Sequences/series in depth."}
      calc_multivariable: {level: 7, notes: "Multivariable calc, vector calculus."}
      calc_real_analysis_bridge: {level: 8, notes: "Rigorous epsilon-delta framing."}
      pde_intro: {level: 8, notes: "Intro PDEs; separation of variables."}

  linear_algebra:
    name: "Linear algebra"
    categories:
      lin_alg_intro: {level: 6, notes: "Matrices, row reduction, vector spaces intro."}
      lin_alg_proofs: {level: 7, notes: "Linear maps, eigen theory, inner products."}
      numerical_linear_algebra: {level: 8, notes: "Conditioning, QR/SVD, iterative methods."}
      functional_analysis_intro: {level: 9, notes: "Banach/Hilbert spaces, operators."}

  discrete_math:
    name: "Discrete math"
    categories:
      counting_basics: {level: 5, notes: "Permutations/combinations, basic recurrences."}
      graph_theory: {level: 7, notes: "Graph properties, flows, matchings intro."}
      combinatorics_advanced: {level: 8, notes: "Generating functions, extremal combinatorics."}
      theoretical_cs_math: {level: 8, notes: "Complexity, reductions, formal proofs."}

  probability_statistics:
    name: "Probability & statistics"
    categories:
      probability_intro: {level: 6, notes: "Random variables, expectation, common distributions."}
      statistics_intro: {level: 6, notes: "Estimation, confidence intervals, hypothesis tests."}
      regression_glm: {level: 7, notes: "Linear regression, GLMs basics."}
      bayesian_methods: {level: 8, notes: "Bayesian inference, MCMC basics."}
      measure_prob: {level: 9, notes: "Measure-theoretic probability."}

  number_theory:
    name: "Number theory"
    categories:
      elementary_nt: {level: 7, notes: "Congruences, modular arithmetic, Diophantine basics."}
      analytic_nt: {level: 9, notes: "L-functions, prime number theorem territory."}
      algebraic_nt: {level: 10, notes: "Class field theory, advanced AG/NT overlap."}
      olympiad_nt: {level: 7, notes: "Contest-style number theory."}

  analysis:
    name: "Analysis"
    categories:
      real_analysis_intro: {level: 8, notes: "Sequences, continuity, differentiation/integration rigor."}
      complex_analysis_intro: {level: 8, notes: "Holomorphic functions, residues."}
      measure_theory: {level: 9, notes: "Sigma-algebras, Lebesgue integration."}
      harmonic_analysis: {level: 10, notes: "Fourier analysis advanced, distributions."}

  topology:
    name: "Topology & geometry (advanced)"
    categories:
      point_set_topology: {level: 9, notes: "Topological spaces, continuity, compactness."}
      algebraic_topology: {level: 9, notes: "Homology, cohomology intro."}
      category_theory: {level: 10, notes: "Categories, functors, adjunctions; advanced."}

  optimization_numerical:
    name: "Optimization & numerical methods"
    categories:
      optimization_intro: {level: 7, notes: "Convexity basics, Lagrange multipliers."}
      convex_optimization: {level: 8, notes: "Duality, KKT, interior-point methods."}
      numerical_analysis: {level: 8, notes: "Error analysis, ODE/PDE numerical schemes."}

  logic_set_theory:
    name: "Logic & set theory"
    categories:
      proof_methods: {level: 7, notes: "Logic basics, proof techniques."}
      set_theory_intro: {level: 8, notes: "Ordinals/cardinals basics, ZFC intro."}
      model_theory: {level: 10, notes: "Advanced logic/model theory."}

  applied_math:
    name: "Applied math"
    categories:
      differential_equations: {level: 7, notes: "ODE methods, stability basics."}
      dynamical_systems: {level: 8, notes: "Phase portraits, chaos intro."}
      control_systems_math: {level: 8, notes: "State space, stability, optimal control intro."}
      signal_processing_math: {level: 7, notes: "Fourier transforms, sampling basics."}

  formal_systems:
    name: "Formal mathematics & proof assistants"
    categories:
      lean_mathlib: {level: 8, notes: "Formalized theorems; proof scripts."}
      coq_mathcomp: {level: 8, notes: "SSReflect/mathcomp formalization."}
      isabelle_afp: {level: 8, notes: "AFP entries; formal proofs."}
      metamath: {level: 7, notes: "Metamath statements/proofs; varies by area."}

  math_reference:
    name: "General reference / encyclopedic"
    categories:
      encyclopedia: {level: 6, notes: "Broad; used as mixed-level narrative reference."}
      glossary: {level: 5, notes: "Definitions and short explanations."}
      research_papers: {level: 9, notes: "ArXiv/journal-style papers."}

rule_sets:
  # Optional: map arXiv primary categories to domain/category/level defaults.
  # Use when targets (or per-record rows) include metadata fields like `arxiv_primary_category`.
  arxiv_primary_category_map:
    "math.AG": {domain: "algebra", category: "commutative_algebra", level: 9}
    "math.AT": {domain: "topology", category: "algebraic_topology", level: 9}
    "math.CA": {domain: "analysis", category: "harmonic_analysis", level: 10}
    "math.CO": {domain: "discrete_math", category: "combinatorics_advanced", level: 8}
    "math.CT": {domain: "topology", category: "category_theory", level: 10}
    "math.DG": {domain: "geometry", category: "differential_geometry_intro", level: 9}
    "math.DS": {domain: "applied_math", category: "dynamical_systems", level: 8}
    "math.FA": {domain: "linear_algebra", category: "functional_analysis_intro", level: 9}
    "math.GN": {domain: "topology", category: "point_set_topology", level: 9}
    "math.GR": {domain: "algebra", category: "abstract_algebra_intro", level: 9}
    "math.GT": {domain: "topology", category: "point_set_topology", level: 9}
    "math.HO": {domain: "math_reference", category: "encyclopedia", level: 6}
    "math.IT": {domain: "probability_statistics", category: "probability_intro", level: 7}
    "math.LO": {domain: "logic_set_theory", category: "model_theory", level: 10}
    "math.MG": {domain: "geometry", category: "olympiad_geometry", level: 7}
    "math.NA": {domain: "optimization_numerical", category: "numerical_analysis", level: 8}
    "math.NT": {domain: "number_theory", category: "elementary_nt", level: 7}
    "math.OC": {domain: "optimization_numerical", category: "convex_optimization", level: 8}
    "math.PR": {domain: "probability_statistics", category: "measure_prob", level: 9}
    "math.QA": {domain: "algebra", category: "abstract_algebra_intro", level: 9}
    "math.RA": {domain: "analysis", category: "real_analysis_intro", level: 8}
    "math.ST": {domain: "probability_statistics", category: "statistics_intro", level: 7}

  # Optional: keyword-based heuristics when no explicit domain/category is provided.
  # The downloader/worker can apply these in order; first match wins.
  keyword_rules:
    - match_any: ["khan academy", "grade 1", "grade 2", "elementary"]
      route: {domain: "arithmetic", category: "integers_basic", level: 1}
    - match_any: ["fractions", "decimals", "percent", "ratio"]
      route: {domain: "arithmetic", category: "ratios_percents", level: 3}
    - match_any: ["algebra i", "linear equation", "inequality", "slope"]
      route: {domain: "algebra", category: "linear_equations", level: 4}
    - match_any: ["precalculus", "trigonometry", "unit circle"]
      route: {domain: "trigonometry", category: "trig_basics", level: 5}
    - match_any: ["calculus", "derivative", "integral"]
      route: {domain: "calculus", category: "calc_single_variable_1", level: 6}
    - match_any: ["real analysis", "measure theory", "lebesgue"]
      route: {domain: "analysis", category: "measure_theory", level: 9}
    - match_any: ["category theory", "adjunction", "yoneda"]
      route: {domain: "topology", category: "category_theory", level: 10}

source_overrides:
  # Per-target overrides (highest precedence). Add entries as you curate targets.
  # Example:
  #   common-pile_wikipedia: {domain: "math_reference", category: "encyclopedia", level: 6}
  #   openstax_calculus: {domain: "calculus", category: "calc_single_variable_1", level: 6}
  {}
