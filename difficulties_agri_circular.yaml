schema_version: '2.0'
updated_utc: '2025-12-20T00:00:00Z'

globals:
  # Recommended destination roots when running the pipeline on Windows via WSL.
  destination_root_windows: E:/AI-Research/datasets/Natural/agri_circular
  destination_root_wsl: /mnt/e/AI-Research/datasets/Natural/agri_circular

  # Output folder template used by download_worker.py (v1.2+).
  # Tokens: {pool}, {subject}, {level}, {domain}, {category}, {target_id}
  folder_layout: pools/{pool}/{subject}/d{level:02d}/{domain}/{category}/{target_id}
  sanitize_path_segments: true

  default_subject: agri_circular
  default_domain: misc
  default_category: misc
  default_level: 5

rubric:
  scale:
    min: 1
    max: 10
    name: Difficulty 1â€“10
  levels:
    1:
      label: Foundations
      description: >
        Plain-language, hands-on basics (terms, parts, simple processes). Minimal math and
        little prior domain knowledge assumed.
      signals: [definitions, simple procedures, hobby/garden level, low jargon]
    2:
      label: Practical operations
      description: >
        Standard practice guides and checklists (farm operations, basic composting, simple
        recordkeeping). Light calculations; common equipment/process context.
      signals: [how-to guides, small calculations, SOPs, field notes]
    3:
      label: Intro technical
      description: >
        Intro science/engineering framing: basic soil properties, nutrient cycling, IPM basics,
        and simple system diagrams. Requires comfort with technical vocabulary.
      signals: [basic chemistry/biology terms, rates/units, simple models]
    4:
      label: Intermediate applied
      description: >
        Extension/undergrad-level applied topics: fertilizer rate calculations, irrigation scheduling,
        basic regulatory concepts, and descriptive analytics. Some statistics and plotting.
      signals: [unit conversions, spreadsheets, mid-level jargon, applied interpretation]
    5:
      label: Applied undergraduate core
      description: >
        Core agronomy/environmental management concepts: soil fertility planning, crop rotations,
        manure management basics, waste-stream characterization, and introductory LCA/TEA.
      signals: [standard methods, lab/field protocols, basic inference, multi-step reasoning]
    6:
      label: Undergraduate advanced
      description: >
        Experimental design, quantitative agronomy/ecology, GIS/remote sensing fundamentals,
        process control concepts (compost/AD), and more formal modeling.
      signals: [DOE, regression, GIS workflows, mechanistic variables, calibration]
    7:
      label: Advanced systems & optimization
      description: >
        Precision ag, hydrology/nutrient transport modeling, integrated farm systems, supply chain
        modeling, and policy analysis with quantitative justification.
      signals: [systems thinking, optimization, uncertainty, multi-source integration]
    8:
      label: Early graduate / specialist
      description: >
        Advanced remote sensing, full LCA/TEA with scenario analysis, agent-based or process models,
        microbial ecology methods, and cross-scale systems analysis.
      signals: [advanced methods, sensitivity analysis, specialized instrumentation, dense figures]
    9:
      label: Graduate core / frontier methods
      description: >
        Biogeochemistry, advanced systems ecology, high-dimensional modeling, advanced econometrics,
        and specialized circular-bioeconomy process design.
      signals: [formal models, advanced statistics, deep domain assumptions, specialist literature]
    10:
      label: Research frontier
      description: >
        Cutting-edge research, novel processes/materials, new algorithms/sensors, or emerging policy
        debates with heavy domain context and dense technical writing.
      signals: [novelty, dense jargon, state-of-the-art methods, research papers/monographs]

subjects:
  agri_circular:
    name: Agriculture, Waste Streams & Circular Bioeconomy
    domains:

      foundations:
        name: Foundational literacy
        categories:
          glossary_terms:
            level: {default: 1, min: 1, max: 2}
            notes: "Definitions, glossaries, introductory primers."
            tags: [glossary, terminology]
          basic_units_rates:
            level: {default: 2, min: 1, max: 3}
            notes: "Units, rates, mass/volume, ppm, basic conversions."
            tags: [units, conversion, rates]
          basic_biology_chemistry:
            level: {default: 3, min: 2, max: 4}
            notes: "Intro biology/chemistry relevant to soils, plants, microbes."
            tags: [biology, chemistry, intro]

      soil_nutrients:
        name: Soil science & nutrient management
        categories:
          soil_basics_texture_structure:
            level: {default: 3, min: 2, max: 4}
            tags: [soil, texture, structure]
          soil_fertility_planning:
            level: {default: 5, min: 4, max: 6}
            tags: [fertility, nutrient_plan, agronomy]
          soil_chemistry_ph_reactions:
            level: {default: 6, min: 5, max: 7}
            tags: [soil_chemistry, pH, cec]
          nutrient_balances_mass_flow:
            level: {default: 7, min: 6, max: 8}
            tags: [mass_balance, nutrient_cycles, modeling]
          soil_carbon_biogeochemistry:
            level: {default: 8, min: 7, max: 9}
            tags: [carbon, biogeochemistry, sequestration]
          soil_microbiome_methods:
            level: {default: 9, min: 8, max: 10}
            tags: [microbiome, omics, metagenomics]

      crops_agronomy:
        name: Crop systems & agronomy
        categories:
          crop_production_practices:
            level: {default: 3, min: 2, max: 4}
            tags: [cropping, practices]
          rotations_cover_crops:
            level: {default: 5, min: 4, max: 6}
            tags: [rotation, cover_crops, soil_health]
          yield_response_trials:
            level: {default: 6, min: 5, max: 7}
            tags: [field_trials, statistics, yield]
          cropping_systems_modeling:
            level: {default: 8, min: 7, max: 9}
            tags: [models, simulation, DSSAT, APSIM]
          breeding_genetics_intro:
            level: {default: 7, min: 6, max: 9}
            tags: [breeding, genetics]
          controlled_environment_ag:
            level: {default: 7, min: 6, max: 8}
            tags: [greenhouse, hydroponics, vertical_farming]

      pests_diseases:
        name: Pests, diseases & IPM
        categories:
          pest_id_basic_ipm:
            level: {default: 3, min: 2, max: 4}
            tags: [ipm, identification]
          pesticide_safety_labels:
            level: {default: 4, min: 3, max: 5}
            tags: [safety, labels, regulation]
          epidemiology_disease_models:
            level: {default: 7, min: 6, max: 9}
            tags: [epidemiology, models]
          resistance_management:
            level: {default: 6, min: 5, max: 7}
            tags: [resistance, strategy]
          biological_controls:
            level: {default: 6, min: 5, max: 8}
            tags: [biocontrol, ecology]

      water_irrigation:
        name: Water management & irrigation
        categories:
          irrigation_basics_scheduling:
            level: {default: 4, min: 3, max: 5}
            tags: [irrigation, scheduling]
          evapotranspiration_et_methods:
            level: {default: 6, min: 5, max: 7}
            tags: [ET, meteorology, modeling]
          drainage_salinity:
            level: {default: 7, min: 6, max: 8}
            tags: [salinity, drainage]
          watershed_hydrology_quality:
            level: {default: 8, min: 7, max: 9}
            tags: [hydrology, water_quality, transport]
          nutrient_transport_models:
            level: {default: 9, min: 8, max: 10}
            tags: [transport, models, calibration]

      livestock_manure:
        name: Livestock systems & manure
        categories:
          husbandry_basics:
            level: {default: 2, min: 1, max: 3}
            tags: [livestock, husbandry]
          manure_handling_storage:
            level: {default: 4, min: 3, max: 5}
            tags: [manure, storage]
          manure_nutrient_plans:
            level: {default: 6, min: 5, max: 7}
            tags: [nutrient_plan, regulation]
          methane_emissions_accounting:
            level: {default: 7, min: 6, max: 9}
            tags: [methane, emissions, GHG]
          anaerobic_digestion_design:
            level: {default: 8, min: 7, max: 10}
            tags: [anaerobic_digestion, process_design, biogas]

      organics_composting:
        name: Organics, composting & biosolids
        categories:
          composting_basics:
            level: {default: 2, min: 1, max: 3}
            tags: [compost, basics]
          compost_process_control:
            level: {default: 6, min: 5, max: 7}
            tags: [aeration, moisture, temperature]
          compost_quality_testing:
            level: {default: 5, min: 4, max: 7}
            tags: [lab_methods, maturity, pathogens]
          biosolids_land_application:
            level: {default: 7, min: 6, max: 9}
            tags: [biosolids, regulation, contaminants]
          pfas_heavy_metals_organics:
            level: {default: 8, min: 7, max: 10}
            tags: [PFAS, metals, risk]

      waste_streams_recycling:
        name: Waste streams, recycling & industrial ecology
        categories:
          municipal_waste_characterization:
            level: {default: 4, min: 3, max: 6}
            tags: [MSW, characterization]
          agricultural_residues:
            level: {default: 5, min: 4, max: 6}
            tags: [residues, biomass]
          nutrient_recovery_struvite:
            level: {default: 8, min: 7, max: 9}
            tags: [nutrient_recovery, struvite]
          landfill_resource_recovery:
            level: {default: 7, min: 6, max: 9}
            tags: [landfill, recovery, mining]
          industrial_symbiosis_design:
            level: {default: 8, min: 7, max: 10}
            tags: [industrial_ecology, symbiosis]

      bioenergy_bioproducts:
        name: Bioenergy & bioproducts
        categories:
          biomass_conversion_overview:
            level: {default: 5, min: 4, max: 6}
            tags: [biomass, conversion]
          biogas_systems:
            level: {default: 7, min: 6, max: 9}
            tags: [biogas, digestion, upgrading]
          fermentation_bioprocessing:
            level: {default: 8, min: 7, max: 10}
            tags: [fermentation, bioprocess]
          biorefinery_process_design:
            level: {default: 9, min: 8, max: 10}
            tags: [biorefinery, process_design]
          biochar_pyrolysis:
            level: {default: 7, min: 6, max: 9}
            tags: [biochar, pyrolysis, carbon]

      sustainability_lca_tea:
        name: Sustainability, LCA & techno-economics
        categories:
          sustainability_reporting_basics:
            level: {default: 4, min: 3, max: 5}
            tags: [reporting, sustainability]
          lca_intro:
            level: {default: 5, min: 4, max: 6}
            tags: [LCA, basics]
          lca_full_modeling:
            level: {default: 8, min: 7, max: 10}
            tags: [LCA, scenario, sensitivity]
          techno_economic_analysis:
            level: {default: 8, min: 7, max: 10}
            tags: [TEA, economics, cost]
          mrvauditing_carbon:
            level: {default: 7, min: 6, max: 9}
            tags: [MRV, carbon, auditing]

      precision_ag:
        name: Precision agriculture, GIS & remote sensing
        categories:
          gis_basics_mapping:
            level: {default: 5, min: 4, max: 6}
            tags: [GIS, mapping]
          remote_sensing_intro:
            level: {default: 6, min: 5, max: 7}
            tags: [remote_sensing, NDVI]
          satellite_time_series_analysis:
            level: {default: 8, min: 7, max: 10}
            tags: [time_series, classification]
          sar_hyperspectral_methods:
            level: {default: 9, min: 8, max: 10}
            tags: [SAR, hyperspectral]
          variable_rate_optimization:
            level: {default: 7, min: 6, max: 9}
            tags: [VRT, optimization]

      economics_policy:
        name: Agricultural economics, policy & regulation
        categories:
          farm_recordkeeping_finance:
            level: {default: 3, min: 2, max: 4}
            tags: [finance, bookkeeping]
          ag_market_stats_trade:
            level: {default: 5, min: 4, max: 6}
            tags: [markets, trade, statistics]
          incentive_programs_subsidies:
            level: {default: 6, min: 5, max: 7}
            tags: [policy, incentives]
          environmental_regulation_compliance:
            level: {default: 6, min: 5, max: 8}
            tags: [compliance, regulation]
          advanced_econometrics_impact_eval:
            level: {default: 9, min: 8, max: 10}
            tags: [econometrics, causal, evaluation]

      food_systems:
        name: Food systems, nutrition & supply chains
        categories:
          food_safety_basics:
            level: {default: 4, min: 3, max: 6}
            tags: [food_safety, HACCP]
          nutrition_packaging_databases:
            level: {default: 4, min: 3, max: 6}
            tags: [nutrition, packaging, databases]
          supply_chain_traceability:
            level: {default: 7, min: 6, max: 9}
            tags: [traceability, supply_chain]
          dietary_environment_links:
            level: {default: 7, min: 6, max: 9}
            tags: [diet, environment, modeling]

      data_infrastructure:
        name: Data infrastructure, ontologies & registries
        categories:
          ontologies_thesauri:
            level: {default: 6, min: 5, max: 8}
            tags: [ontology, rdf, skos]
          registries_facility_ids:
            level: {default: 5, min: 4, max: 7}
            tags: [registry, identifiers]
          schema_standards_metadata:
            level: {default: 6, min: 5, max: 8}
            tags: [metadata, schema]
          knowledge_graphs_integration:
            level: {default: 8, min: 7, max: 10}
            tags: [knowledge_graphs, integration]

      biodiversity_ecology:
        name: Biodiversity & ecology
        categories:
          species_occurrences_geospatial:
            level: {default: 6, min: 5, max: 8}
            tags: [GBIF, occurrences, geospatial]
          ecology_field_methods:
            level: {default: 6, min: 5, max: 8}
            tags: [field_methods, sampling]
          ecological_modeling:
            level: {default: 8, min: 7, max: 10}
            tags: [models, ecology]
          conservation_planning:
            level: {default: 7, min: 6, max: 9}
            tags: [conservation, planning]

      environmental_monitoring:
        name: Environmental monitoring & compliance data
        categories:
          facility_registry_basic:
            level: {default: 4, min: 3, max: 6}
            tags: [EPA, facility_registry, identifiers]
          air_emissions_permits:
            level: {default: 6, min: 5, max: 8}
            tags: [air, emissions, permits]
          water_discharge_npdes_dmr:
            level: {default: 6, min: 5, max: 8}
            tags: [water, NPDES, DMR]
          drinking_water_sdwa:
            level: {default: 5, min: 4, max: 7}
            tags: [drinking_water, SDWA]
          waste_rcra_hazardous:
            level: {default: 6, min: 5, max: 8}
            tags: [waste, RCRA]
          toxics_release_tri:
            level: {default: 6, min: 5, max: 8}
            tags: [TRI, toxics]
          enforcement_cases:
            level: {default: 5, min: 4, max: 7}
            tags: [enforcement, compliance]
          environmental_justice_demographics:
            level: {default: 5, min: 4, max: 7}
            tags: [EJ, demographics]

# Optional: per-target overrides (useful until each target has explicit `routing:` metadata).
# Keyed by subject, then target_id.
source_overrides:
  agri_circular:
    epa_echo_frs_downloads: {domain: environmental_monitoring, category: facility_registry_basic, level: 4, granularity: target, reason: "EPA ECHO FRS bulk registry"}
    epa_echo_echo_exporter: {domain: environmental_monitoring, category: facility_registry_basic, level: 4, granularity: target, reason: "EPA ECHO exporter flattened tables"}
    epa_echo_air_pollution: {domain: environmental_monitoring, category: air_emissions_permits, level: 6, granularity: target, reason: "EPA ECHO air pollution/CAA tables"}
    epa_echo_tri_crosswalks: {domain: environmental_monitoring, category: toxics_release_tri, level: 6, granularity: target, reason: "TRI crosswalk tables"}
    epa_echo_state_metrics: {domain: environmental_monitoring, category: enforcement_cases, level: 5, granularity: target, reason: "State metrics / compliance metrics"}
    epa_echo_environmental_justice_demographics: {domain: environmental_monitoring, category: environmental_justice_demographics, level: 5, granularity: target, reason: "EJ/demographics context tables"}
    epa_echo_pipeline_rcra_downloads: {domain: environmental_monitoring, category: waste_rcra_hazardous, level: 6, granularity: target, reason: "RCRA hazardous waste downloads"}
    epa_echo_npdes_downloads: {domain: environmental_monitoring, category: water_discharge_npdes_dmr, level: 6, granularity: target, reason: "NPDES downloads"}
    epa_echo_dmr_downloads: {domain: environmental_monitoring, category: water_discharge_npdes_dmr, level: 6, granularity: target, reason: "DMR monitoring results"}
    epa_echo_sdwa_latest: {domain: environmental_monitoring, category: drinking_water_sdwa, level: 5, granularity: target, reason: "SDWA public water systems"}
    epa_echo_attains_pfas: {domain: environmental_monitoring, category: water_discharge_npdes_dmr, level: 7, granularity: target, reason: "ATTAINS PFAS impairment data"}
    epa_echo_cso_ssos: {domain: environmental_monitoring, category: water_discharge_npdes_dmr, level: 6, granularity: target, reason: "CSO/SSO data"}
    epa_echo_enforcement_cases: {domain: environmental_monitoring, category: enforcement_cases, level: 5, granularity: target, reason: "Enforcement cases download"}
    fao_agrovoc_latest: {domain: data_infrastructure, category: ontologies_thesauri, level: 6, granularity: target, reason: "AGROVOC RDF/SKOS thesaurus"}
    openfoodfacts_products: {domain: food_systems, category: nutrition_packaging_databases, level: 4, granularity: target, reason: "Open Food Facts product DB"}
    commonpile_candidate: {domain: data_infrastructure, category: knowledge_graphs_integration, level: 7, granularity: target, reason: "CommonPile mixed text; needs filtering"}
    gbif_occurrences_candidate: {domain: biodiversity_ecology, category: species_occurrences_geospatial, level: 6, granularity: target, reason: "GBIF occurrences w/ per-record license"}
    faostat_candidate: {domain: economics_policy, category: ag_market_stats_trade, level: 5, granularity: target, reason: "FAOSTAT global ag stats"}
    ecoinvent_red: {domain: sustainability_lca_tea, category: lca_full_modeling, level: 9, granularity: target, reason: "Proprietary LCA (disabled)"}
    gabi_red: {domain: sustainability_lca_tea, category: lca_full_modeling, level: 9, granularity: target, reason: "Proprietary LCA (disabled)"}

rule_sets:
  global:
    keyword_rules:
      # Environmental monitoring / compliance
      - match_any: ["epa echo", "facility registry service", "frs", "npdes", "dmr", "sdwa", "rcra", "tri", "attains", "cso", "sso", "enforcement"]
        route: {subject: agri_circular, domain: environmental_monitoring, category: facility_registry_basic, level: 5, granularity: target}
        confidence: 0.6

      # Ontologies / vocabularies
      - match_any: ["agrovoc", "skos", "rdf", "thesaurus", "ontology", "controlled vocabulary"]
        route: {subject: agri_circular, domain: data_infrastructure, category: ontologies_thesauri, level: 6, granularity: target}
        confidence: 0.65

      # Food / nutrition product DBs
      - match_any: ["open food facts", "nutrition", "ingredients", "packaging", "nutriscore", "food database"]
        route: {subject: agri_circular, domain: food_systems, category: nutrition_packaging_databases, level: 4, granularity: target}
        confidence: 0.6

      # Biodiversity / ecology occurrences
      - match_any: ["gbif", "occurrence", "species", "biodiversity", "taxon"]
        route: {subject: agri_circular, domain: biodiversity_ecology, category: species_occurrences_geospatial, level: 6, granularity: target}
        confidence: 0.6

      # Global ag stats / trade / emissions
      - match_any: ["faostat", "production", "trade", "yield", "emissions", "food balance"]
        route: {subject: agri_circular, domain: economics_policy, category: ag_market_stats_trade, level: 5, granularity: target}
        confidence: 0.55

      # Organics / compost / digestion (future-proofing)
      - match_any: ["compost", "windrow", "aerated static pile", "biosolids", "digestate", "anaerobic digestion", "biogas"]
        route: {subject: agri_circular, domain: organics_composting, category: compost_process_control, level: 6, granularity: target}
        confidence: 0.5

      # LCA / TEA
      - match_any: ["life cycle", "lca", "inventory", "techno-economic", "tea", "carbon footprint"]
        route: {subject: agri_circular, domain: sustainability_lca_tea, category: lca_intro, level: 6, granularity: target}
        confidence: 0.5

  subjects:
    agri_circular:
      keyword_rules:
        - match_any: ["pfas", "perfluoro", "biosolids contamination", "heavy metals", "pathogens"]
          route: {subject: agri_circular, domain: organics_composting, category: pfas_heavy_metals_organics, level: 8, granularity: target}
          confidence: 0.65
        - match_any: ["precision agriculture", "remote sensing", "ndvi", "sentinel", "landsat", "gis"]
          route: {subject: agri_circular, domain: precision_ag, category: remote_sensing_intro, level: 6, granularity: target}
          confidence: 0.55
