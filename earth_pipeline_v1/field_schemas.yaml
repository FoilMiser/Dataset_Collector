# field_schemas.yaml
# v1.0 â€” Versioned field definitions for environmental / Earth systems ingestion
#
# Each schema version is immutable once released. Create a new version for changes.
# This keeps evaluation and downstream consumers reproducible.

schema_version: "1.0"
updated_utc: "2025-12-17"

schemas:

  earth_dataset_card_v1.0.0:
    description: "Dataset-card style summary for Earth observation / environmental resources"
    version: "1.0.0"
    created_utc: "2025-12-17"
    source: "dataset_cards|metadata_catalogs|docs"
    fields:
      dataset_id:
        description: "Stable identifier for the dataset or collection"
        type: "string"
        required: true
        nullable: false
      title:
        description: "Human-readable title"
        type: "string"
        required: true
        nullable: false
      description:
        description: "Concise description of what the dataset contains"
        type: "string"
        required: true
        nullable: false
      provider:
        description: "Publishing organization (e.g., NASA, NOAA, USGS, ECMWF)"
        type: "string"
        required: true
        nullable: false
      collection_platform:
        description: "Platform or sensor family (satellite, in situ, model, survey, citizen science)"
        type: "string"
        required: false
        nullable: true
      spatial_scope:
        description: "Spatial coverage notes (global, regional, watershed, station network)"
        type: "string"
        required: false
        nullable: true
      temporal_coverage:
        description: "Time span or resolution (e.g., 1980-present, hourly, monthly)"
        type: "string"
        required: false
        nullable: true
      update_frequency:
        description: "How often the dataset refreshes"
        type: "string"
        required: false
        nullable: true
      license_spdx:
        description: "Resolved SPDX license identifier or policy tag"
        type: "string"
        required: true
        nullable: false
      access_level:
        description: "Open/public domain/attribution-only/conditional"
        type: "string"
        required: false
        nullable: true
      landing_page:
        description: "Primary landing page or DOI"
        type: "string"
        required: false
        nullable: true
      documentation_url:
        description: "Documentation or user guide link"
        type: "string"
        required: false
        nullable: true
      data_formats:
        description: "List of file formats available (NetCDF, GeoTIFF, CSV, JSON, GRIB, Parquet)"
        type: "list[string]"
        required: false
        nullable: true
      keywords:
        description: "Topical keywords or GCMD-style tags"
        type: "list[string]"
        required: false
        nullable: true
      citation:
        description: "Suggested citation text"
        type: "string"
        required: false
        nullable: true
      governance_notes:
        description: "License caveats, attribution wording, or sensitive content notes"
        type: "string"
        required: false
        nullable: true

  stac_item_metadata_v1.0.0:
    description: "Minimal metadata for STAC-like item summaries without raster payloads"
    version: "1.0.0"
    created_utc: "2025-12-17"
    source: "stac_catalogs|collection_api"
    fields:
      item_id:
        description: "Unique STAC item id"
        type: "string"
        required: true
        nullable: false
      collection:
        description: "Parent collection or mission"
        type: "string"
        required: true
        nullable: false
      title:
        description: "Readable title"
        type: "string"
        required: false
        nullable: true
      description:
        description: "Short abstract pulled from the STAC item"
        type: "string"
        required: false
        nullable: true
      datetime:
        description: "Central timestamp for the scene/observation"
        type: "string"
        required: false
        nullable: true
      start_datetime:
        description: "Start of temporal extent"
        type: "string"
        required: false
        nullable: true
      end_datetime:
        description: "End of temporal extent"
        type: "string"
        required: false
        nullable: true
      bbox:
        description: "Bounding box as [west, south, east, north]"
        type: "list[float]"
        required: false
        nullable: true
      instruments:
        description: "List of sensors/instruments"
        type: "list[string]"
        required: false
        nullable: true
      platforms:
        description: "Platform identifiers (spacecraft, aircraft, in situ)"
        type: "list[string]"
        required: false
        nullable: true
      assets_summary:
        description: "Lightweight summary of asset types (e.g., thumbnail, metadata, quicklook)"
        type: "list[string]"
        required: false
        nullable: true
      license_spdx:
        description: "Resolved SPDX license identifier or collection policy tag"
        type: "string"
        required: true
        nullable: false
      keywords:
        description: "Topical tags"
        type: "list[string]"
        required: false
        nullable: true

  indicator_table_schema_v1.0.0:
    description: "Schema for structured indicator/metric tables (climate indices, hydrology stats, biodiversity counts)"
    version: "1.0.0"
    created_utc: "2025-12-17"
    source: "tabular_api|csv_feeds"
    fields:
      indicator_name:
        description: "Name of the indicator (e.g., SPI, NDVI, GHG concentration)"
        type: "string"
        required: true
        nullable: false
      variable_name:
        description: "Column variable name in the source table"
        type: "string"
        required: true
        nullable: false
      units:
        description: "Units for the measurement"
        type: "string"
        required: false
        nullable: true
      methodology:
        description: "Computation or aggregation method summary"
        type: "string"
        required: false
        nullable: true
      geography:
        description: "Spatial granularity (global, country, basin, station)"
        type: "string"
        required: false
        nullable: true
      temporal_resolution:
        description: "Cadence of the indicator (hourly, daily, monthly, annual)"
        type: "string"
        required: false
        nullable: true
      valid_time:
        description: "Timestamp or period the value is valid for"
        type: "string"
        required: false
        nullable: true
      source_url:
        description: "Provenance link for the row/series"
        type: "string"
        required: false
        nullable: true
      license_spdx:
        description: "Resolved SPDX license or usage policy"
        type: "string"
        required: true
        nullable: false
      quality_flags:
        description: "Any quality or screening flags provided by the publisher"
        type: "list[string]"
        required: false
        nullable: true
      notes:
        description: "Freeform notes about caveats or constraints"
        type: "string"
        required: false
        nullable: true

# Type conversion functions (for reference in code)
type_converters:
  integer:
    python: "int"
    null_handling: "return None if empty/invalid"
  float:
    python: "float"
    null_handling: "return None if empty/invalid"
  string:
    python: "str"
    null_handling: "return None if empty, strip whitespace"
  boolean:
    python: "bool"
    null_handling: "return None if empty/invalid"
  list[string]:
    python: "list"
    null_handling: "return [] if empty/invalid"
  list[float]:
    python: "list"
    null_handling: "return [] if empty/invalid"
